(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["playlist"],{"324a":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var i=n("2b4c");function r(){return Object(i["a"])({url:"/personalized?limit=6",method:"get"})}function a(e){return Object(i["a"])({url:"/personalized/newsong",method:"get",params:e})}function s(){return Object(i["a"])({url:"/banner",method:"get"})}function c(e){return Object(i["a"])({url:"/song/detail?ids=".concat(e),method:"get"})}},8168:function(e,t,n){},b887:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"singer-container"},[n("BaseBack",{attrs:{title:"歌单广场"}}),n("BaseTabs",{attrs:{navList:e.navList,active:e.active},on:{tabs:e.handleScroll,change:e.handleChange}}),e.navList.length>0?n("swiper",{ref:"mySwiper",attrs:{options:e.swiperOptions}},e._l(e.navList,(function(t,i){return n("swiper-slide",{key:t.id},[n(e.currentTabComponent(i),{ref:"playlist",refInFor:!0,tag:"component"})],1)})),1):e._e()],1)},r=[],a=(n("99af"),n("2909")),s=(n("96cf"),n("1da1")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-scrollbar"},[n("BaseList",{attrs:{list:e.list},on:{list:e.getSingerDetail}})],1)},o=[],l=(n("13d5"),n("b0c0"),n("5530")),u=n("2b4c");function d(){return Object(u["a"])({url:"/playlist/hot",method:"get"})}function p(e){return Object(u["a"])({url:"playlist/detail?id=".concat(e),method:"get"})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(u["a"])({url:"/personalized?limit=".concat(10*e),method:"get"})}var f=n("2f62"),g={name:"PlayListMain",props:["id"],data:function(){return{list:[]}},computed:Object(l["a"])({},Object(f["c"])(["singer"])),methods:Object(l["a"])({getSingers:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var i,r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,p(e);case 2:i=n.sent,r=i.code,a=i.playlist.tracks,200==r&&(t.list=a.reduce((function(e,t){var n={id:t.id,picUrl:t.al.picUrl,playCount:t.dt,name:t.name};return e.push(n),e}),[]));case 6:case"end":return n.stop()}}),n)})))()},getSingerDetail:function(e){var t={id:e.id,singerPic:e.picUrl,name:e.name};this.setSinger(t),this.$router.push("/playlist/".concat(e.id))}},Object(f["d"])(["setSinger"]))},h=g,v=n("2877"),y=Object(v["a"])(h,c,o,!1,null,"e13253ba",null),b=y.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"play-scrollbar play"},[n("PlayListBanner"),n("main",[n("BaseList",{attrs:{list:e.list},on:{list:e.getSingerDetail}})],1)],1)},S=[],O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("BaseSwiper",{ref:"mySwiper",staticClass:"playlist-recommend",attrs:{list:e.recommendSongs,options:e.swiperOptions},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.data,r=t.index;return[n("div",{staticClass:"playlist-recommend-wrap"},[n("img",{staticClass:"playlist-recommend-pic",attrs:{src:i.picUrl,alt:""}}),n("span",{staticClass:"playlist-recommend-icon iconfont",class:e.palyStatus(i),on:{click:function(t){return e.handlePlay(i,r)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.id!=r,expression:"id != index"}],staticClass:"playlist-recommend-mask"})])]}}])}),n("p",{staticClass:"playlist-recommend-name"},[n("strong",[e._v(e._s(e.recommendSongs[e.id]&&e.recommendSongs[e.id]["name"]))])])],1)},j=[],L=(n("c740"),n("fb6a"),n("324a")),x=n("01ea"),C={name:"PlayListBanner",data:function(){var e=this;return{swiperOptions:{effect:"coverflow",slidesPerView:"3",spaceBetween:"-20%",centeredSlides:!0,loop:!0,loopSlides:2,coverflowEffect:{rotate:0,stretch:0,depth:130,modifier:4,slideShadows:!1},on:{slideChange:function(){e.id=e.swiper.realIndex}}},recommendSongs:[],id:0}},computed:Object(l["a"])({palyStatus:function(e){var t=e.playing,n=e.currrenSong;return function(e){return n.id==e.id&&t?"icon-pause-full":"icon-bofang"}},swiper:function(){return this.$refs.mySwiper.swiper}},Object(f["c"])(["playList","playing","currrenSong"])),created:function(){var e=this;this.getRecommendSongs(),this.$nextTick((function(){return e.audio=document.getElementById("audio")}))},methods:Object(l["a"])({handlePlay:function(e){var t=this.playList.findIndex((function(t){return t.id===e.id}));if(t>=0)e.id==this.currrenSong.id?(this.setPlaying(!this.playing),this.playing?this.audio.play():this.audio.pause()):this.setCurrrentIndex(t);else{var n={id:e.id,name:e.name,picUrl:e.picUrl,singer:e.song.artists[0]["name"],album:e.song.album.name,alia:e.song.album.alias,privilege:{pl:e.song.privilege["pl"],fee:e.song.privilege["fee"],flag:e.song.privilege["flag"],maxbr:e.song.privilege["maxbr"]}};this.setPlay([new x["a"](n)].concat(Object(a["a"])(this.playList))),this.setSequenceList(this.playList),this.setCurrrentIndex(0)}},getRecommendSongs:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(L["c"])({limit:30});case 2:n=t.sent,i=n.code,r=n.result,200==i&&(e.recommendSongs=r.slice(0,5));case 6:case"end":return t.stop()}}),t)})))()}},Object(f["d"])(["setPlaying","setCurrrentIndex","setPlay","setSequenceList"]))},P=C,k=(n("c927"),Object(v["a"])(P,O,j,!1,null,"3774f4a2",null)),R=k.exports,_={name:"PlayListRecommend",components:{PlayListBanner:R},data:function(){return{list:[]}},methods:Object(l["a"])({getSingers:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m();case 2:n=t.sent,i=n.code,r=n.result,200==i&&(e.list=r.reduce((function(e,t){var n={id:t.id,picUrl:t.picUrl,playCount:t.playCount,name:t.name};return e.push(n),e}),[]));case 6:case"end":return t.stop()}}),t)})))()},getSingerDetail:function(e){var t={id:e.id,singerPic:e.picUrl,name:e.name};this.setSinger(t),this.$router.push("/playlist/".concat(e.id))}},Object(f["d"])(["setSinger"]))},B=_,$=Object(v["a"])(B,w,S,!1,null,null,null),U=$.exports,I={name:"PlayList",components:{PlayListMain:b,PlayListRecommend:U},data:function(){var e=this;return{active:0,navList:[],swiperOptions:{on:{slideChange:function(){e.active=e.swiper.activeIndex}},loop:!1,watchSlidesVisibility:!0}}},computed:{currentTabComponent:function(){return function(e){return 0==e?"PlayListRecommend":"PlayListMain"}},swiper:function(){return this.$refs.mySwiper.swiper}},watch:{navList:{deep:!0,handler:function(){var e=this;this.$nextTick((function(){e.child=e.$refs.playlist,e.child[0].getSingers()}))}}},created:function(){this.getList()},methods:{handleChange:function(e){var t=this.navList[e]["id"];this.child[this.active].getSingers(t)},getList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d();case 2:n=t.sent,i=n.code,r=n.tags,200==i&&(e.navList=[{name:"推荐",id:100}].concat(Object(a["a"])(r)));case 6:case"end":return t.stop()}}),t)})))()},handleScroll:function(e){this.active!=e&&this.swiper.slideTo(e,0,!1)}}},E=I,T=(n("ec3d"),Object(v["a"])(E,i,r,!1,null,"55557f0f",null));t["default"]=T.exports},c927:function(e,t,n){"use strict";var i=n("d12b"),r=n.n(i);r.a},d12b:function(e,t,n){},ec3d:function(e,t,n){"use strict";var i=n("8168"),r=n.n(i);r.a}}]);
//# sourceMappingURL=playlist.1106596e.js.map