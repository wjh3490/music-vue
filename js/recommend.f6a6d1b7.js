(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["recommend"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"13d5":function(e,t,n){"use strict";var r=n("23e7"),a=n("d58f").left,i=n("a640"),s=n("ae40"),c=i("reduce"),o=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!o},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"149b":function(e,t,n){},"2b19":function(e,t,n){var r=n("23e7"),a=n("129f");r({target:"Object",stat:!0},{is:a})},"324a":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var r=n("2b4c");function a(){return Object(r["a"])({url:"/personalized",method:"get"})}function i(){return Object(r["a"])({url:"/personalized/newsong?limit=100",method:"get"})}function s(){return Object(r["a"])({url:"/banner",method:"get"})}function c(e){return Object(r["a"])({url:"/song/detail?ids=".concat(e),method:"get"})}},3513:function(e,t,n){},"7abe":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"recommend"},[n("RecommendSearch"),n("div",{staticClass:"recommend-swiper"},[n("BaseSwiper",{attrs:{list:e.swiperList,options:e.swiperOptions,visible:!0},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.data;return[n("img",{staticClass:"swiper-lazy swiper-img",attrs:{"data-index":t.targetId,"data-src":t.imageUrl}}),n("div",{staticClass:"my-lazy-preloader"})]}}])})],1),n("BaseNav"),n("BaseList",{attrs:{list:e.personalized},on:{list:e.pushDetails}},[n("h3",{staticClass:"recommend-type"},[e._v("热门推荐")])]),n("BaseList",{attrs:{list:e.newsong},on:{list:e.playSong}},[n("h3",{staticClass:"recommend-type"},[e._v("新碟上架")])])],1)},a=[],i=(n("99af"),n("c740"),n("13d5"),n("fb6a"),n("a434"),n("b0c0"),n("dca8"),n("2b19"),n("2909")),s=(n("96cf"),n("1da1")),c=n("5530"),o=function(e,t){var n=t._c;return n("div",{staticClass:"header-search"},[n("router-link",{key:"搜索",staticClass:"header-link",attrs:{tag:"div",to:"/search"}},[n("span",{staticClass:"iconfont icon-sousuo header-icon"}),n("span",[t._v("请输入搜索内容")])])],1)},u=[],l={name:"RecommendSearch"},d=l,p=(n("ede2"),n("2877")),f=Object(p["a"])(d,o,u,!0,null,"74ecfacf",null),m=f.exports,g=n("2f62"),h=n("324a"),b={name:"Recommend",components:{RecommendSearch:m},data:function(){var e=this;return{swiperOptions:{pagination:{el:".swiper-pagination"},on:{tap:function(t){e.getDetail(t.target.dataset.index)}},loop:!0,autoplay:{delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1},watchSlidesVisibility:!0,lazy:{preloaderClass:"my-lazy-preloader"},slidesPerView:"auto",centeredSlides:!0},swiperList:[],personalized:[],newsong:[]}},computed:Object(c["a"])({},Object(g["c"])(["playList"])),created:function(){this.getSwiperList(),this.getPersonalized(),this.getNewsong()},methods:Object(c["a"])({getSwiperList:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["a"])();case 2:n=t.sent,r=n.code,a=n.banners,200===r&&(e.swiperList=Object.freeze(a));case 6:case"end":return t.stop()}}),t)})))()},getPersonalized:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["d"])();case 2:n=t.sent,r=n.code,a=n.result,200===r&&(e.personalized=Object.freeze(a.splice(0,15)));case 6:case"end":return t.stop()}}),t)})))()},getNewsong:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["c"])();case 2:n=t.sent,r=n.code,a=n.result,200==r&&(i=a.slice(6).reduce((function(e,t){var n={id:t.id,picUrl:t.picUrl,name:t.name,playCount:t.song.bMusic&&t.song.bMusic.playTime,singer:t.song.artists[0]["name"]};return e.push(n),e}),[]),e.newsong=i);case 6:case"end":return t.stop()}}),t)})))()},getDetail:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(h["b"])(e);case 2:if(r=n.sent,a=r.songs,a.length){n.next=6;break}return n.abrupt("return");case 6:s={id:a[0].id,name:a[0].name,picUrl:a[0].al.picUrl,singer:a[0].ar[0].name},c=t.playList.findIndex((function(e){return e.id===s.id})),c>=0?t.setCurrrentIndex(c):(t.setPlay([s].concat(Object(i["a"])(t.playList))),t.setSequenceList(t.playList),t.setCurrrentIndex(0));case 9:case"end":return n.stop()}}),n)})))()},playSong:function(e,t){Object.is(this.newsong,this.playList)||(this.setPlay(this.newsong),this.setSequenceList(this.newsong)),this.setCurrrentIndex(t)},pushDetails:function(e){var t={id:e.id,singerPic:e.picUrl,name:e.name};this.setSinger(t),this.$router.push("/details/".concat(e.id,"?singerPic=").concat(e.picUrl,"&name=").concat(e.name,"&componentName=RecommendDetail"))}},Object(g["d"])(["setCurrrentIndex","setPlay","setFullScreen","setSequenceList","setSinger"]))},w=b,v=(n("ca42"),Object(p["a"])(w,r,a,!1,null,"7681e974",null));t["default"]=v.exports},ca42:function(e,t,n){"use strict";var r=n("3513"),a=n.n(r);a.a},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),i=n("44ad"),s=n("50c4"),c=function(e){return function(t,n,c,o){r(n);var u=a(t),l=i(u),d=s(u.length),p=e?d-1:0,f=e?-1:1;if(c<2)while(1){if(p in l){o=l[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in l&&(o=n(o,l[p],p,u));return o}};e.exports={left:c(!1),right:c(!0)}},ede2:function(e,t,n){"use strict";var r=n("149b"),a=n.n(r);a.a}}]);
//# sourceMappingURL=recommend.f6a6d1b7.js.map