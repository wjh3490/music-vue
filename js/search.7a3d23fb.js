(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"0f70":function(t,e,n){"use strict";var s=n("6c8f"),r=n.n(s);r.a},"4bbc":function(t,e,n){},"6c8f":function(t,e,n){},a0a1:function(t,e,n){"use strict";var s=n("4bbc"),r=n.n(s);r.a},b16c:function(t,e,n){"use strict";var s=n("df6e"),r=n.n(s);r.a},bb2f:function(t,e,n){var s=n("d039");t.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},c975:function(t,e,n){"use strict";var s=n("23e7"),r=n("4d64").indexOf,a=n("a640"),i=n("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),l=i("indexOf",{ACCESSORS:!0,1:0});s({target:"Array",proto:!0,forced:o||!u||!l},{indexOf:function(t){return o?c.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},dca8:function(t,e,n){var s=n("23e7"),r=n("bb2f"),a=n("d039"),i=n("861d"),c=n("f183").onFreeze,o=Object.freeze,u=a((function(){o(1)}));s({target:"Object",stat:!0,forced:u,sham:!r},{freeze:function(t){return o&&i(t)?o(c(t)):t}})},df6e:function(t,e,n){},efe3:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search"},[n("BaseBack",{attrs:{isFixed:!0,background:"rgb(22, 154, 243"},scopedSlots:t._u([{key:"right",fn:function(){return[n("span",{staticStyle:{"font-size":"15px"},on:{click:t.cancle}},[t._v("取消")])]},proxy:!0}])},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData,expression:"searchData"}],staticClass:"search-input",attrs:{type:"text",placeholder:"热门"},domProps:{value:t.searchData},on:{input:function(e){e.target.composing||(t.searchData=e.target.value)}}})]),n("div",{staticClass:"item"},[n("SearchList",{key:"hot",attrs:{list:t.hotLsit,hotTitle:"热门搜索",visible:!t.searchData,vertical:!0},on:{handleSearch:function(e){return t.searchData=e}}}),n("SearchList",{key:"history",attrs:{visible:!t.searchData,hotTitle:"历史记录",list:t.historyList,vertical:!1},on:{handleSearch:function(e){return t.searchData=e},del:t.del}}),n("SearchResult",{attrs:{list:t.searchList,noResult:t.noResult},on:{play:t.play},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.item;return[n("div",{staticClass:"name ellipsis",domProps:{innerHTML:t._s(t.highlight(s.name))}}),n("div",{staticClass:"singer ellipsis",domProps:{innerHTML:t._s(t.highlight(s.singer))}})]}}])})],1)],1)},r=[],a=(n("c740"),n("c975"),n("13d5"),n("a434"),n("b0c0"),n("dca8"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("96cf"),n("1da1")),i=n("5530"),c=n("2f62"),o=n("2b4c");function u(t){return Object(o["a"])({url:"/search?keywords=".concat(t," "),method:"get"})}function l(){return Object(o["a"])({url:"/search/hot ",method:"get"})}var h=n("ed08"),f=function(t,e){var n=e._c;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.props.visible,expression:"props.visible"}],class:e.props.vertical?"hot":"history"},[n("p",{staticClass:"search-name"},[e._v(e._s(e.props.hotTitle))]),e.props.vertical?e._e():n("div",{staticClass:"del"},[n("span",{staticClass:"all search-icon",on:{click:function(t){return e.listeners.del()}}},[e._v("删除全部")]),n("span",{staticClass:"iconfont icon-shanchu search-icon"})]),n("ul",{staticClass:"search-list"},e._l(e.props.list,(function(t,s){return n("li",{key:s,staticClass:"search-item",on:{click:function(n){return e.listeners.handleSearch(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])},d=[],p={name:"SearchList",props:{list:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hotTitle:{type:String,default:""}}},v=p,b=(n("b16c"),n("2877")),g=Object(b["a"])(v,f,d,!0,null,"780e4775",null),m=g.exports,y=function(t,e){var n=e._c;return n("div",{staticClass:"result"},[n("ul",{staticClass:"result-list"},e._l(e.props.list,(function(t,s){return n("li",{key:s,staticClass:"result-item",on:{click:function(n){return e.listeners.play(t,s)}}},[e._t("default",null,{item:t})],2)})),0),e.props.noResult?n("p",{staticStyle:{color:"red",textAlign:"center",marginTop:"0.4rem"}},[e._v("暂无结果")]):e._e()])},x=[],O={name:"Result"},S=O,L=(n("a0a1"),Object(b["a"])(S,y,x,!0,null,"eca0d6e6",null)),k=L.exports,D={name:"Search",components:{SearchList:m,SearchResult:k},data:function(){return{searchData:"",hotLsit:[],searchList:[],flag:null,noResult:!1}},computed:Object(i["a"])({highlight:function(){var t=new RegExp(this.searchData,"gi");return function(e){return e.replace(t,"<span class='red'>".concat(this.searchData,"</span>"))}}},Object(c["c"])(["playList","historyList"])),watch:{searchData:function(t){var e=this;this.debounce((function(){e.getSearch(t)}),300)}},created:function(){this.getHotList()},methods:Object(i["a"])({debounce:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.flag&&clearTimeout(this.flag),this.flag=setTimeout(t,e)},getSearch:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var s,r,a,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.searchData){n.next=3;break}return e.searchList=[],n.abrupt("return");case 3:return n.next=5,u(t);case 5:if(s=n.sent,r=s.code,a=s.result,200!==r){n.next=17;break}if(i=a.songs,i){n.next=14;break}return e.searchList=[],e.noResult=!0,n.abrupt("return");case 14:e.noResult=!1,c=i.reduce((function(t,e){var n={id:e.id,name:e.name,singer:e.artists[0].name,picUrl:e.artists[0].img1v1Url};return t.push(n),t}),[]),e.searchList=Object.freeze(c);case 17:case"end":return n.stop()}}),n)})))()},getHotList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,s,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:n=e.sent,s=n.code,r=n.result,200===s&&(a=r.hots,i=a.reduce((function(t,e){return t.push(e.first),t}),[]),t.hotLsit=i);case 6:case"end":return e.stop()}}),e)})))()},cancle:function(){this.searchData="",this.searchList=[]},del:function(){var t=this;0!==this.historyList.length&&this.$MessageBox({title:"",content:"是否要删除全部"}).then((function(){t.setHistoryList([]),localStorage.setItem("history",JSON.stringify([]))})).catch((function(){}))},play:function(t){var e=this.historyList,n=e.indexOf(this.searchData);n>-1&&e.splice(n,1),e.length>=10&&e.pop(),e.unshift(this.searchData);var s=Object(h["a"])(this.playList,t),r=s.findIndex((function(e){return e.id===t.id}));localStorage.setItem("history",JSON.stringify(e)),this.setPlay(s),this.setCurrrentIndex(r),this.setFullScreen(!0),this.setHistoryList(e)}},Object(c["d"])(["setCurrrentIndex","setPlay","setFullScreen","setHistoryList"]))},w=D,j=(n("0f70"),Object(b["a"])(w,s,r,!1,null,"e29fbc52",null));e["default"]=j.exports},f183:function(t,e,n){var s=n("d012"),r=n("861d"),a=n("5135"),i=n("9bf2").f,c=n("90e3"),o=n("bb2f"),u=c("meta"),l=0,h=Object.isExtensible||function(){return!0},f=function(t){i(t,u,{value:{objectID:"O"+ ++l,weakData:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,u)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[u].objectID},p=function(t,e){if(!a(t,u)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[u].weakData},v=function(t){return o&&b.REQUIRED&&h(t)&&!a(t,u)&&f(t),t},b=t.exports={REQUIRED:!1,fastKey:d,getWeakData:p,onFreeze:v};s[u]=!0}}]);
//# sourceMappingURL=search.7a3d23fb.js.map