(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["search"],{"0f70":function(t,e,r){"use strict";var n=r("6c8f"),s=r.n(n);s.a},"13d5":function(t,e,r){"use strict";var n=r("23e7"),s=r("d58f").left,a=r("a640"),i=r("ae40"),c=a("reduce"),o=i("reduce",{1:0});n({target:"Array",proto:!0,forced:!c||!o},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"4bbc":function(t,e,r){},"4d63":function(t,e,r){var n=r("83ab"),s=r("da84"),a=r("94ca"),i=r("7156"),c=r("9bf2").f,o=r("241c").f,u=r("44e7"),l=r("ad6d"),h=r("9f7f"),f=r("6eeb"),d=r("d039"),p=r("69f3").set,v=r("2626"),g=r("b622"),y=g("match"),b=s.RegExp,m=b.prototype,x=/a/g,S=/a/g,L=new b(x)!==x,w=h.UNSUPPORTED_Y,O=n&&a("RegExp",!L||w||d((function(){return S[y]=!1,b(x)!=x||b(S)==S||"/a/i"!=b(x,"i")})));if(O){var k=function(t,e){var r,n=this instanceof k,s=u(t),a=void 0===e;if(!n&&s&&t.constructor===k&&a)return t;L?s&&!a&&(t=t.source):t instanceof k&&(a&&(e=l.call(t)),t=t.source),w&&(r=!!e&&e.indexOf("y")>-1,r&&(e=e.replace(/y/g,"")));var c=i(L?new b(t,e):b(t,e),n?this:m,k);return w&&r&&p(c,{sticky:r}),c},R=function(t){t in k||c(k,t,{configurable:!0,get:function(){return b[t]},set:function(e){b[t]=e}})},_=o(b),C=0;while(_.length>C)R(_[C++]);m.constructor=k,k.prototype=m,f(s,"RegExp",k)}v("RegExp")},"6c8f":function(t,e,r){},a0a1:function(t,e,r){"use strict";var n=r("4bbc"),s=r.n(n);s.a},b16c:function(t,e,r){"use strict";var n=r("df6e"),s=r.n(n);s.a},c975:function(t,e,r){"use strict";var n=r("23e7"),s=r("4d64").indexOf,a=r("a640"),i=r("ae40"),c=[].indexOf,o=!!c&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),l=i("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:o||!u||!l},{indexOf:function(t){return o?c.apply(this,arguments)||0:s(this,t,arguments.length>1?arguments[1]:void 0)}})},d58f:function(t,e,r){var n=r("1c0b"),s=r("7b0b"),a=r("44ad"),i=r("50c4"),c=function(t){return function(e,r,c,o){n(r);var u=s(e),l=a(u),h=i(u.length),f=t?h-1:0,d=t?-1:1;if(c<2)while(1){if(f in l){o=l[f],f+=d;break}if(f+=d,t?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:h>f;f+=d)f in l&&(o=r(o,l[f],f,u));return o}};t.exports={left:c(!1),right:c(!0)}},df6e:function(t,e,r){},efe3:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"search"},[r("BaseBack",{attrs:{isFixed:!0,background:"rgb(22, 154, 243"},scopedSlots:t._u([{key:"right",fn:function(){return[r("span",{staticStyle:{"font-size":"15px"},on:{click:t.cancle}},[t._v("取消")])]},proxy:!0}])},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData,expression:"searchData"}],staticClass:"search-input",attrs:{type:"text",placeholder:"热门"},domProps:{value:t.searchData},on:{input:function(e){e.target.composing||(t.searchData=e.target.value)}}})]),r("div",{staticClass:"item"},[r("SearchList",{key:"hot",attrs:{list:t.hotLsit,hotTitle:"热门搜索",visible:!t.searchData,vertical:!0},on:{handleSearch:function(e){return t.searchData=e}}}),r("SearchList",{key:"history",attrs:{visible:!t.searchData,hotTitle:"历史记录",list:t.historyList,vertical:!1},on:{handleSearch:function(e){return t.searchData=e},del:t.del}}),r("SearchResult",{attrs:{list:t.searchList,noResult:t.noResult},on:{play:t.play},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("div",{staticClass:"name ellipsis",domProps:{innerHTML:t._s(t.highlight(n.name))}}),r("div",{staticClass:"singer ellipsis",domProps:{innerHTML:t._s(t.highlight(n.singer))}})]}}])})],1)],1)},s=[],a=(r("c740"),r("c975"),r("13d5"),r("a434"),r("b0c0"),r("dca8"),r("4d63"),r("ac1f"),r("25f0"),r("5319"),r("96cf"),r("1da1")),i=r("5530"),c=r("2f62"),o=r("2b4c");function u(t){return Object(o["a"])({url:"/search?keywords=".concat(t," "),method:"get"})}function l(){return Object(o["a"])({url:"/search/hot ",method:"get"})}var h=r("ed08"),f=function(t,e){var r=e._c;return r("div",{directives:[{name:"show",rawName:"v-show",value:e.props.visible,expression:"props.visible"}],class:e.props.vertical?"hot":"history"},[r("p",{staticClass:"search-name"},[e._v(e._s(e.props.hotTitle))]),e.props.vertical?e._e():r("div",{staticClass:"del"},[r("span",{staticClass:"all search-icon",on:{click:function(t){return e.listeners.del()}}},[e._v("删除全部")]),r("span",{staticClass:"iconfont icon-shanchu search-icon"})]),r("ul",{staticClass:"search-list"},e._l(e.props.list,(function(t,n){return r("li",{key:n,staticClass:"search-item",on:{click:function(r){return e.listeners.handleSearch(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])},d=[],p={name:"SearchList",props:{list:{type:Array,default:function(){return[]}},visible:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hotTitle:{type:String,default:""}}},v=p,g=(r("b16c"),r("2877")),y=Object(g["a"])(v,f,d,!0,null,"780e4775",null),b=y.exports,m=function(t,e){var r=e._c;return r("div",{staticClass:"result"},[r("ul",{staticClass:"result-list"},e._l(e.props.list,(function(t,n){return r("li",{key:n,staticClass:"result-item",on:{click:function(r){return e.listeners.play(t,n)}}},[e._t("default",null,{item:t})],2)})),0),e.props.noResult?r("p",{staticStyle:{color:"red",textAlign:"center",marginTop:"0.4rem"}},[e._v("暂无结果")]):e._e()])},x=[],S={name:"Result"},L=S,w=(r("a0a1"),Object(g["a"])(L,m,x,!0,null,"eca0d6e6",null)),O=w.exports,k={name:"Search",components:{SearchList:b,SearchResult:O},data:function(){return{searchData:"",hotLsit:[],searchList:[],flag:null,noResult:!1}},computed:Object(i["a"])({highlight:function(){var t=new RegExp(this.searchData,"gi");return function(e){return e.replace(t,"<span class='red'>".concat(this.searchData,"</span>"))}}},Object(c["c"])(["playList","historyList"])),watch:{searchData:function(t){var e=this;this.debounce((function(){e.getSearch(t)}),300)}},created:function(){this.getHotList()},methods:Object(i["a"])({debounce:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.flag&&clearTimeout(this.flag),this.flag=setTimeout(t,e)},getSearch:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,a,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.searchData){r.next=3;break}return e.searchList=[],r.abrupt("return");case 3:return r.next=5,u(t);case 5:if(n=r.sent,s=n.code,a=n.result,200!==s){r.next=17;break}if(i=a.songs,i){r.next=14;break}return e.searchList=[],e.noResult=!0,r.abrupt("return");case 14:e.noResult=!1,c=i.reduce((function(t,e){var r={id:e.id,name:e.name,singer:e.artists[0].name,picUrl:e.artists[0].img1v1Url};return t.push(r),t}),[]),e.searchList=Object.freeze(c);case 17:case"end":return r.stop()}}),r)})))()},getHotList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n,s,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:r=e.sent,n=r.code,s=r.result,200===n&&(a=s.hots,i=a.reduce((function(t,e){return t.push(e.first),t}),[]),t.hotLsit=i);case 6:case"end":return e.stop()}}),e)})))()},cancle:function(){this.searchData="",this.searchList=[]},del:function(){var t=this;0!==this.historyList.length&&this.$MessageBox({title:"",content:"是否要删除全部"}).then((function(){t.setHistoryList([]),localStorage.setItem("history",JSON.stringify([]))})).catch((function(){}))},play:function(t){var e=this.historyList,r=e.indexOf(this.searchData);r>-1&&e.splice(r,1),e.length>=10&&e.pop(),e.unshift(this.searchData);var n=Object(h["a"])(this.playList,t),s=n.findIndex((function(e){return e.id===t.id}));localStorage.setItem("history",JSON.stringify(e)),this.setPlay(n),this.setCurrrentIndex(s),this.setFullScreen(!0),this.setHistoryList(e)}},Object(c["d"])(["setCurrrentIndex","setPlay","setFullScreen","setHistoryList"]))},R=k,_=(r("0f70"),Object(g["a"])(R,n,s,!1,null,"e29fbc52",null));e["default"]=_.exports}}]);
//# sourceMappingURL=search.c0245ef0.js.map